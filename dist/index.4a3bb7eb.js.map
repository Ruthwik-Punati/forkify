{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-552fcf0be4b79281.js","src/js/helper.js","src/js/model.js","node_modules/@parcel/runtime-js/lib/runtime-644f02e9c3f5eee3.js","src/js/views/view.js","src/js/views/results.js","src/js/views/showRecipe.js","src/js/views/paginationView.js","src/js/views/bookmarksView.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9fpV\\\":\\\"index.4a3bb7eb.js\\\",\\\"hfd23\\\":\\\"icons.c14567a0.svg\\\"}\"));","export const getJson = async function (url) {\r\n  const fetchRes = await fetch(url);\r\n\r\n  const data = await fetchRes.json();\r\n\r\n  return data;\r\n};\r\n","import { getJson } from './helper.js';\r\n\r\nexport const state = {\r\n  results: [],\r\n  recipe: [],\r\n  query: '',\r\n  page: 1,\r\n  pageResults: [],\r\n  bookmarks: [],\r\n  getItem() {\r\n    const bookmarks = localStorage.getItem('bookmarks2');\r\n\r\n    this.bookmarks = JSON.parse(bookmarks);\r\n    this.bookmarks || (this.bookmarks = []);\r\n  },\r\n};\r\n\r\nstate.getItem();\r\n\r\nexport const addHandlerSearch = function (handler) {\r\n  document.querySelector('.search').addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    const query = getQuery();\r\n    handler(query);\r\n  });\r\n};\r\n\r\nexport function getQuery() {\r\n  const query = document.querySelector('.search__field').value;\r\n  document.querySelector('.search__field').value = '';\r\n  return query;\r\n}\r\n\r\nexport const getSearchResults = async function (query) {\r\n  const data = await getJson(\r\n    `https://forkify-api.herokuapp.com/api/v2/recipes?search=${query}`\r\n  );\r\n  const { recipes } = data.data;\r\n\r\n  state.results = recipes.map(recipe => {\r\n    const { publisher, image_url, title, id } = recipe;\r\n\r\n    return { publisher, image_url, title, id };\r\n  });\r\n\r\n  paginationResults(state.page);\r\n\r\n  console.log(state.pageResults);\r\n};\r\n\r\nexport const showRecipe = async function (idNo) {\r\n  const data = await getJson(\r\n    `https://forkify-api.herokuapp.com/api/v2/recipes/${idNo}`\r\n  );\r\n  console.log(data);\r\n\r\n  const { recipe } = data.data;\r\n  console.log(recipe);\r\n  state.recipe = [recipe];\r\n  console.log(state.bookmarks);\r\n  if (state.bookmarks.some(b => b[0].id === state.recipe[0].id)) {\r\n    state.recipe[0].bookmarked = true;\r\n  } else {\r\n    state.recipe[0].bookmarked = false;\r\n  }\r\n};\r\n\r\nexport function paginationResults(page) {\r\n  const start = (page - 1) * 10;\r\n  const end = page * 10;\r\n  state.pageResults = state.results.slice(start, end);\r\n}\r\n\r\nexport const changeServings = function (servings) {\r\n  state.recipe[0].ingredients.forEach(\r\n    ing => (ing.quantity = (ing.quantity * servings) / state.recipe[0].servings)\r\n  );\r\n  console.log(state.recipe);\r\n  state.recipe[0].servings = servings;\r\n};\r\n\r\nexport const addBookmark = function () {\r\n  state.recipe[0].bookmarked = true;\r\n  state.bookmarks.push(state.recipe);\r\n  console.log(state.recipe[0].bookmarked);\r\n  console.log(state.bookmarks);\r\n};\r\n\r\nexport const deleteBookmark = function () {\r\n  const index = state.bookmarks.findIndex(b => b[0].id === state.recipe[0].id);\r\n  state.recipe[0].bookmarked = false;\r\n\r\n  console.log(state.recipe[0].bookmarked);\r\n\r\n  state.bookmarks.splice(index, 1);\r\n  console.log(state.bookmarks);\r\n};\r\n\r\nexport const persistBookmarks = function () {\r\n  localStorage.setItem('bookmarks2', JSON.stringify(state.bookmarks));\r\n};\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hfd23\")).toString();","import icons from '../../img/icons.svg';\r\n\r\nexport default class View {\r\n  render(data) {\r\n    console.log(data);\r\n    if (!data || data.length === 0) throw Error();\r\n\r\n    let markUp = 'nothing';\r\n    if (typeof data === 'number') {\r\n      markUp = this._generateMarkUp();\r\n    } else {\r\n      markUp = data.map(data => this._generateMarkUp(data)).join('');\r\n    }\r\n    this.clear();\r\n    this._parentEl.insertAdjacentHTML('afterbegin', markUp);\r\n  }\r\n\r\n  update(data) {\r\n    if (!data) return;\r\n    const newmarkUp = this._generateMarkUp(data);\r\n    const newDOM = document.createRange().createContextualFragment(newmarkUp);\r\n    const newElements = Array.from(newDOM.querySelectorAll('*'));\r\n    const currElements = Array.from(this._parentEl.querySelectorAll('*'));\r\n\r\n    // updates changed text\r\n    newElements.forEach((newEl, i) => {\r\n      let curEl = currElements[i];\r\n\r\n      if (\r\n        !newEl.isEqualNode(curEl) &&\r\n        newEl.firstChild?.nodeValue.trim() !== ''\r\n      ) {\r\n        curEl.textContent = newEl.textContent;\r\n      }\r\n\r\n      // updates changed attributes\r\n      if (!newEl.isEqualNode(curEl) && newEl.firstChild?.nodeValue.trim()) {\r\n        Array.from(newEl.attributes).forEach(attr =>\r\n          curEl.setAttribute(attr.name, attr.value)\r\n        );\r\n      }\r\n    });\r\n  }\r\n  clear() {\r\n    this._parentEl.innerHTML = '';\r\n  }\r\n\r\n  renderSpinner() {\r\n    const markUp = `<div class=\"spinner\">\r\n    <svg>\r\n      <use href=\"${icons}#icon-loader\"></use>\r\n    </svg>\r\n  </div> `;\r\n    this.clear();\r\n    this._parentEl.insertAdjacentHTML('afterbegin', markUp);\r\n  }\r\n\r\n  renderError() {\r\n    const markUp = `<div class=\"error\">\r\n    <div>\r\n      <svg>\r\n        <use href=\"${icons}#icon-alert-triangle\"></use>\r\n      </svg>\r\n    </div>\r\n    <p>${this._message}</p>\r\n  </div>`;\r\n    this.clear();\r\n    this._parentEl.insertAdjacentHTML('afterbegin', markUp);\r\n  }\r\n}\r\n","import View from './view.js';\r\nimport icons from '../../img/icons.svg';\r\n\r\nclass ResultsView extends View {\r\n  constructor() {\r\n    super();\r\n  }\r\n  _parentEl = document.querySelector('.results');\r\n  _message = 'no recipes for this query!';\r\n  _generateMarkUp(result) {\r\n    const id = window.location.hash.slice(1);\r\n\r\n    return ` <li class=\"preview\">\r\n    <a class=\"preview__link ${\r\n      id === result.id ? 'preview__link--active' : ''\r\n    }\" href=#${result.id}>\r\n      <figure class=\"preview__fig\">\r\n        <img src=${result.image_url} alt=${result.title} />\r\n      </figure>\r\n      <div class=\"preview__data\">\r\n        <h4 class=\"preview__title\">${result.title}</h4>\r\n        <p class=\"preview__publisher\">${result.publisher}</p>\r\n        <div class=\"preview__user-generated\">\r\n          <svg>\r\n          <use href=\"${icons}#icon-user\"></use>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </a>\r\n  </li>`;\r\n  }\r\n}\r\n\r\nexport default new ResultsView();\r\n","import View from './view.js';\r\nimport icons from '../../img/icons.svg';\r\nimport * as model from '../model.js';\r\n\r\nclass showRecipe extends View {\r\n  _parentEl = document.querySelector('.recipe');\r\n  _message = 'Something went wrong! Please try again!';\r\n  _generateMarkUp(recipe) {\r\n    return ` <figure class=\"recipe__fig\">\r\n    <img src=${recipe.image_url} alt=${recipe.title} class=\"recipe__img\" />\r\n    <h1 class=\"recipe__title\">\r\n      <span>${recipe.title}</span>\r\n    </h1>\r\n  </figure>\r\n\r\n  <div class=\"recipe__details\">\r\n    <div class=\"recipe__info\">\r\n      <svg class=\"recipe__info-icon\">\r\n        <use href=\"${icons}#icon-clock\"></use>\r\n      </svg>\r\n      <span class=\"recipe__info-data recipe__info-data--minutes\">${\r\n        recipe.cooking_time\r\n      }</span>\r\n      <span class=\"recipe__info-text\">minutes</span>\r\n    </div>\r\n    <div class=\"recipe__info\">\r\n      <svg class=\"recipe__info-icon\">\r\n        <use href=${icons}></use>\r\n      </svg>\r\n      <span class=\"recipe__info-data recipe__info-data--people\">${\r\n        recipe.servings\r\n      }</span>\r\n      <span class=\"recipe__info-text\">servings</span>\r\n\r\n      <div class=\"recipe__info-buttons\">\r\n        <button class=\"btn--tiny btn--decrease-servings\">\r\n          <svg>\r\n            <use href=\"${icons}#icon-minus-circle\"></use>\r\n          </svg>\r\n        </button>\r\n        <button class=\"btn--tiny btn--increase-servings\">\r\n          <svg>\r\n            <use href=\"${icons}#icon-plus-circle\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"recipe__user-generated\">\r\n      <svg>\r\n        <use href=\"${icons}#icon-user\"></use>\r\n      </svg>\r\n    </div>\r\n    <button class=\"btn--round\">\r\n      <svg class=\"\">\r\n        <use href=\"${icons}#icon-bookmark${\r\n      recipe.bookmarked ? '-fill' : ''\r\n    }\"></use>\r\n      </svg>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"recipe__ingredients\">\r\n    <h2 class=\"heading--2\">Recipe ingredients</h2>\r\n    <ul class=\"recipe__ingredient-list\">\r\n   ${this._generateIngredientsMarkUp(recipe)}\r\n    </ul>\r\n  </div>\r\n\r\n  <div class=\"recipe__directions\">\r\n    <h2 class=\"heading--2\">How to cook it</h2>\r\n    <p class=\"recipe__directions-text\">\r\n      This recipe was carefully designed and tested by\r\n      <span class=\"recipe__publisher\">The Pioneer Woman</span>. Please check out\r\n      directions at their website.\r\n    </p>\r\n    <a\r\n      class=\"btn--small recipe__btn\"\r\n      href=\"http://thepioneerwoman.com/cooking/pasta-with-tomato-cream-sauce/\"\r\n      target=\"_blank\"\r\n    >\r\n      <span>Directions</span>\r\n      <svg class=\"search__icon\">\r\n        <use href=\"${icons}#icon-arrow-right\"></use>\r\n      </svg>\r\n    </a>\r\n  </div>`;\r\n  }\r\n\r\n  _generateIngredientsMarkUp(recipe) {\r\n    return recipe.ingredients\r\n      .map(ing => {\r\n        return ` <li class=\"recipe__ingredient\">\r\n      <svg class=\"recipe__icon\">\r\n        <use href=\"${icons}#icon-check\"></use>\r\n      </svg>\r\n      <div class=\"recipe__quantity\">${ing.quantity}</div>\r\n      <div class=\"recipe__description\">\r\n        <span class=\"recipe__unit\">${ing.unit}</span>\r\n       ${ing.description}\r\n      </div>\r\n    </li>`;\r\n      })\r\n      .join('');\r\n  }\r\n\r\n  addHandlerShowRecipe(handler) {\r\n    ['hashchange', 'load'].forEach(ev =>\r\n      window.addEventListener(ev, function (e) {\r\n        console.log(e);\r\n\r\n        handler();\r\n      })\r\n    );\r\n  }\r\n\r\n  addHandlerServings(handler) {\r\n    this._parentEl.addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--tiny');\r\n      if (!btn) return;\r\n      if (btn.classList.contains('btn--increase-servings')) {\r\n        const newServings = model.state.recipe[0].servings + 1;\r\n        if (newServings < 1) return;\r\n        model.changeServings(newServings);\r\n      }\r\n\r\n      if (btn.classList.contains('btn--decrease-servings')) {\r\n        const newServings = model.state.recipe[0].servings - 1;\r\n        if (newServings < 1) return;\r\n        model.changeServings(newServings);\r\n      }\r\n      handler();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new showRecipe();\r\n","import View from './view';\r\nimport icons from '../../img/icons.svg';\r\nimport * as model from '../model.js';\r\n\r\nclass PaginationView extends View {\r\n  _parentEl = document.querySelector('.pagination');\r\n\r\n  _generateMarkUp(page = model.state.page) {\r\n    const noOfPages = Math.ceil(model.state.results.length / 10);\r\n    console.log(noOfPages);\r\n\r\n    if (noOfPages === 1) {\r\n      return '';\r\n    }\r\n\r\n    if (page === 1) {\r\n      return `<button class=\"btn--inline pagination__btn--next\">\r\n        <span>Page ${page + 1}</span>\r\n        <svg class=\"search__icon\">\r\n          <use href=\"${icons}#icon-arrow-right\"></use>\r\n        </svg>\r\n      </button>`;\r\n    }\r\n\r\n    if (page === noOfPages) {\r\n      return ` <button class=\"btn--inline pagination__btn--prev\">\r\n    <svg class=\"search__icon\">\r\n      <use href=\"${icons}#icon-arrow-left\"></use>\r\n    </svg>\r\n    <span>Page ${page - 1}</span>\r\n  </button>\r\n `;\r\n    }\r\n    if (page > 1 && page < noOfPages) {\r\n      return ` <button class=\"btn--inline pagination__btn--prev\">\r\n        <svg class=\"search__icon\">\r\n          <use href=\"${icons}#icon-arrow-left\"></use>\r\n        </svg>\r\n        <span>Page ${page - 1}</span>\r\n      </button>\r\n      <button class=\"btn--inline pagination__btn--next\">\r\n        <span>Page ${page + 1}</span>\r\n        <svg class=\"search__icon\">\r\n          <use href=\"${icons}#icon-arrow-right\"></use>\r\n        </svg>\r\n      </button> `;\r\n    }\r\n  }\r\n\r\n  addHandlerPagination(page, handler) {\r\n    this._parentEl.addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--inline');\r\n      if (btn.classList.contains('pagination__btn--prev')) {\r\n        model.state.page = model.state.page - 1;\r\n      }\r\n      if (btn.classList.contains('pagination__btn--next')) {\r\n        model.state.page = model.state.page + 1;\r\n      }\r\n\r\n      model.paginationResults(model.state.page);\r\n      handler();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new PaginationView();\r\n","import View from './view.js';\r\nimport icons from '../../img/icons.svg';\r\nimport * as model from '../model.js';\r\n\r\nclass Bookmarks extends View {\r\n  _parentEl = document.querySelector('.bookmarks__list');\r\n\r\n  addHandlerBookmarks(handler) {\r\n    document.querySelector('.recipe').addEventListener('click', function (e) {\r\n      const btn = e.target.closest('.btn--round');\r\n      if (!btn) return;\r\n      if (!model.state.recipe[0].bookmarked) {\r\n        model.addBookmark();\r\n      } else {\r\n        model.deleteBookmark();\r\n      }\r\n      model.persistBookmarks();\r\n      handler();\r\n    });\r\n  }\r\n\r\n  _generateMarkUp(bookmark) {\r\n    const id = window.location.hash.slice(1);\r\n    const result = bookmark[0];\r\n    console.log(result);\r\n    return ` <li class=\"preview\">\r\n    <a class=\"preview__link ${\r\n      id === result.id ? 'preview__link--active' : ''\r\n    }\" href=#${result.id}>\r\n      <figure class=\"preview__fig\">\r\n        <img src=${result.image_url} alt=${result.title} />\r\n      </figure>\r\n      <div class=\"preview__data\">\r\n        <h4 class=\"preview__title\">${result.title}</h4>\r\n        <p class=\"preview__publisher\">${result.publisher}</p>\r\n        <div class=\"preview__user-generated\">\r\n          <svg>\r\n          <use href=\"${icons}#icon-user\"></use>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </a>\r\n  </li>`;\r\n  }\r\n}\r\n\r\nexport default new Bookmarks();\r\n","import * as model from './model.js';\r\nimport resultsView from './views/results.js';\r\nimport showRecipeView from './views/showRecipe.js';\r\nimport paginationView from './views/paginationView.js';\r\n\r\nimport bookmarksView from './views/bookmarksView.js';\r\n// import 'core-js/stable';\r\n// import 'regenerator-runtime/runtime';\r\nconst recipeContainer = document.querySelector('.recipe');\r\n\r\nconst timeout = function (s) {\r\n  return new Promise(function (_, reject) {\r\n    setTimeout(function () {\r\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\r\n    }, s * 1000);\r\n  });\r\n};\r\n\r\n// https://forkify-api.herokuapp.com/v2\r\n\r\n///////////////////////////////////////\r\n\r\nconsole.log('hello');\r\n\r\nasync function controllResults(query) {\r\n  try {\r\n    // rendering spinner\r\n    resultsView.renderSpinner();\r\n\r\n    // getting search results\r\n    await model.getSearchResults(query);\r\n\r\n    // rendering results\r\n    resultsView.render(model.state.pageResults);\r\n\r\n    // rendering page buttons\r\n    paginationView.render(model.state.page);\r\n  } catch (err) {\r\n    resultsView.renderError();\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nasync function controllShowRecipe() {\r\n  try {\r\n    // rendering spinner\r\n    showRecipeView.renderSpinner();\r\n\r\n    // getting id\r\n    const id = window.location.hash.slice(1);\r\n\r\n    // getting recipe data\r\n    await model.showRecipe(id);\r\n\r\n    // rendering recipe\r\n    showRecipeView.render(model.state.recipe);\r\n\r\n    showRecipeView.addHandlerServings(handlerServings);\r\n\r\n    bookmarksView.render(model.state.bookmarks);\r\n\r\n    // updating/rendering results\r\n    if (model.state.pageResults.length > 0)\r\n      resultsView.render(model.state.pageResults);\r\n  } catch (err) {\r\n    showRecipeView.renderError();\r\n    console.log(err);\r\n  }\r\n}\r\n\r\n// pagination handler\r\nconst handlerPagination = function () {\r\n  resultsView.render(model.state.pageResults);\r\n  paginationView.render(model.state.page);\r\n};\r\n\r\nconst handlerBookmarks = function () {\r\n  showRecipeView.render(model.state.recipe);\r\n  bookmarksView.render(model.state.bookmarks);\r\n};\r\n// initializer\r\nconst init = function () {\r\n  showRecipeView.addHandlerShowRecipe(controllShowRecipe);\r\n\r\n  model.addHandlerSearch(controllResults);\r\n\r\n  paginationView.addHandlerPagination(model.state.page, handlerPagination);\r\n\r\n  bookmarksView.addHandlerBookmarks(handlerBookmarks);\r\n};\r\ninit();\r\n\r\n// hash change\r\n\r\nconst handlerServings = function () {\r\n  console.log('ok');\r\n  showRecipeView.render(model.state.recipe);\r\n};\r\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$d3824bf2ef2465db$export$a75c676177490cac","async","url","fetchRes","fetch","json","$0f1d4402dffacf5b$export$ca000e230c0caa3e","results","recipe","query","page","pageResults","bookmarks","getItem","localStorage","this","$0f1d4402dffacf5b$export$16843bd9db699016","handler","document","querySelector","addEventListener","e","preventDefault","value","$0f1d4402dffacf5b$export$71eec30d9db46a56","$0f1d4402dffacf5b$export$cfcc0908d6dfb8a6","data","recipes","map","publisher","image_url","title","$0f1d4402dffacf5b$export$b6439104cef452b2","console","log","$0f1d4402dffacf5b$export$33183e408bb164dd","idNo","some","b","bookmarked","start","end","slice","$0f1d4402dffacf5b$export$d89bf0265ab1865","servings","ingredients","forEach","ing","quantity","$cb59c201e168fdfe$exports","URL","resolve","toString","$b2d7157267813d3a$export$2e2bcd8739ae039","render","markUp","_generateMarkUp","join","clear","_parentEl","insertAdjacentHTML","update","newmarkUp","newDOM","createRange","createContextualFragment","newElements","Array","from","querySelectorAll","currElements","newEl","curEl","isEqualNode","firstChild","nodeValue","trim","textContent","attributes","attr","setAttribute","name","innerHTML","renderSpinner","$parcel$interopDefault","renderError","_message","$49dc1478e812358d$export$2e2bcd8739ae039","constructor","super","result","window","location","hash","$6cc0b7226d443725$export$2e2bcd8739ae039","cooking_time","_generateIngredientsMarkUp","unit","description","addHandlerShowRecipe","ev","addHandlerServings","btn","target","closest","classList","contains","newServings","$cfa940594ee109f7$export$2e2bcd8739ae039","noOfPages","Math","ceil","addHandlerPagination","$5d1bb7e064b2cbd1$export$2e2bcd8739ae039","addHandlerBookmarks","index","findIndex","splice","$0f1d4402dffacf5b$export$136048bcb9946c75","push","setItem","stringify","bookmark","$f50bd1f2915ed0f2$var$controllResults","err","$f50bd1f2915ed0f2$var$controllShowRecipe","$f50bd1f2915ed0f2$var$handlerServings","$f50bd1f2915ed0f2$var$handlerPagination","$f50bd1f2915ed0f2$var$handlerBookmarks"],"version":3,"file":"index.4a3bb7eb.js.map"}