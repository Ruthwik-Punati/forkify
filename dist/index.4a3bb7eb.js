function e(e,n,s,r){Object.defineProperty(e,n,{get:s,set:r,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},t=s.parcelRequire7e89;null==t&&((t=function(e){if(e in r)return r[e].exports;if(e in i){var n=i[e];delete i[e];var s={id:e,exports:{}};return r[e]=s,n.call(s.exports,s,s.exports),s.exports}var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=function(e,n){i[e]=n},s.parcelRequire7e89=t),t.register("27Lyk",(function(n,s){var r,i;e(n.exports,"register",(()=>r),(e=>r=e)),e(n.exports,"resolve",(()=>i),(e=>i=e));var t={};r=function(e){for(var n=Object.keys(e),s=0;s<n.length;s++)t[n[s]]=e[n[s]]},i=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}})),t("27Lyk").register(JSON.parse('{"f9fpV":"index.4a3bb7eb.js","hfd23":"icons.c14567a0.svg"}'));const a=async function(e){const n=await fetch(e);return await n.json()},o={results:[],recipe:[],query:"",page:1,pageResults:[],bookmarks:[],getItem(){const e=localStorage.getItem("bookmarks2");this.bookmarks=JSON.parse(e),this.bookmarks||(this.bookmarks=[])}};o.getItem();const c=function(e){document.querySelector(".search").addEventListener("submit",(function(n){n.preventDefault();const s=function(){const e=document.querySelector(".search__field").value;return document.querySelector(".search__field").value="",e}();e(s)}))};const l=async function(e){const n=await a(`https://forkify-api.herokuapp.com/api/v2/recipes?search=${e}`),{recipes:s}=n.data;o.results=s.map((e=>{const{publisher:n,image_url:s,title:r,id:i}=e;return{publisher:n,image_url:s,title:r,id:i}})),d(o.page),console.log(o.pageResults)},p=async function(e){const n=await a(`https://forkify-api.herokuapp.com/api/v2/recipes/${e}`);console.log(n);const{recipe:s}=n.data;console.log(s),o.recipe=[s],console.log(o.bookmarks),o.bookmarks.some((e=>e[0].id===o.recipe[0].id))?o.recipe[0].bookmarked=!0:o.recipe[0].bookmarked=!1};function d(e){const n=10*(e-1),s=10*e;o.pageResults=o.results.slice(n,s)}const u=function(e){o.recipe[0].ingredients.forEach((n=>n.quantity=n.quantity*e/o.recipe[0].servings)),console.log(o.recipe),o.recipe[0].servings=e};var g;g=new URL(t("27Lyk").resolve("hfd23"),import.meta.url).toString();class _{render(e){if(console.log(e),!e||0===e.length)throw Error();let n="nothing";n="number"==typeof e?this._generateMarkUp():e.map((e=>this._generateMarkUp(e))).join(""),this.clear(),this._parentEl.insertAdjacentHTML("afterbegin",n)}update(e){if(!e)return;const n=this._generateMarkUp(e),s=document.createRange().createContextualFragment(n),r=Array.from(s.querySelectorAll("*")),i=Array.from(this._parentEl.querySelectorAll("*"));r.forEach(((e,n)=>{let s=i[n];e.isEqualNode(s)||""===e.firstChild?.nodeValue.trim()||(s.textContent=e.textContent),!e.isEqualNode(s)&&e.firstChild?.nodeValue.trim()&&Array.from(e.attributes).forEach((e=>s.setAttribute(e.name,e.value)))}))}clear(){this._parentEl.innerHTML=""}renderSpinner(){const e=`<div class="spinner">\n    <svg>\n      <use href="${n(g)}#icon-loader"></use>\n    </svg>\n  </div> `;this.clear(),this._parentEl.insertAdjacentHTML("afterbegin",e)}renderError(){const e=`<div class="error">\n    <div>\n      <svg>\n        <use href="${n(g)}#icon-alert-triangle"></use>\n      </svg>\n    </div>\n    <p>${this._message}</p>\n  </div>`;this.clear(),this._parentEl.insertAdjacentHTML("afterbegin",e)}}var v=new class extends _{constructor(){super()}_parentEl=document.querySelector(".results");_message="no recipes for this query!";_generateMarkUp(e){return` <li class="preview">\n    <a class="preview__link ${window.location.hash.slice(1)===e.id?"preview__link--active":""}" href=#${e.id}>\n      <figure class="preview__fig">\n        <img src=${e.image_url} alt=${e.title} />\n      </figure>\n      <div class="preview__data">\n        <h4 class="preview__title">${e.title}</h4>\n        <p class="preview__publisher">${e.publisher}</p>\n        <div class="preview__user-generated">\n          <svg>\n          <use href="${n(g)}#icon-user"></use>\n          </svg>\n        </div>\n      </div>\n    </a>\n  </li>`}};var f=new class extends _{_parentEl=document.querySelector(".recipe");_message="Something went wrong! Please try again!";_generateMarkUp(e){return` <figure class="recipe__fig">\n    <img src=${e.image_url} alt=${e.title} class="recipe__img" />\n    <h1 class="recipe__title">\n      <span>${e.title}</span>\n    </h1>\n  </figure>\n\n  <div class="recipe__details">\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href="${n(g)}#icon-clock"></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--minutes">${e.cooking_time}</span>\n      <span class="recipe__info-text">minutes</span>\n    </div>\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href=${n(g)}></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--people">${e.servings}</span>\n      <span class="recipe__info-text">servings</span>\n\n      <div class="recipe__info-buttons">\n        <button class="btn--tiny btn--decrease-servings">\n          <svg>\n            <use href="${n(g)}#icon-minus-circle"></use>\n          </svg>\n        </button>\n        <button class="btn--tiny btn--increase-servings">\n          <svg>\n            <use href="${n(g)}#icon-plus-circle"></use>\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    <div class="recipe__user-generated">\n      <svg>\n        <use href="${n(g)}#icon-user"></use>\n      </svg>\n    </div>\n    <button class="btn--round">\n      <svg class="">\n        <use href="${n(g)}#icon-bookmark${e.bookmarked?"-fill":""}"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="recipe__ingredients">\n    <h2 class="heading--2">Recipe ingredients</h2>\n    <ul class="recipe__ingredient-list">\n   ${this._generateIngredientsMarkUp(e)}\n    </ul>\n  </div>\n\n  <div class="recipe__directions">\n    <h2 class="heading--2">How to cook it</h2>\n    <p class="recipe__directions-text">\n      This recipe was carefully designed and tested by\n      <span class="recipe__publisher">The Pioneer Woman</span>. Please check out\n      directions at their website.\n    </p>\n    <a\n      class="btn--small recipe__btn"\n      href="http://thepioneerwoman.com/cooking/pasta-with-tomato-cream-sauce/"\n      target="_blank"\n    >\n      <span>Directions</span>\n      <svg class="search__icon">\n        <use href="${n(g)}#icon-arrow-right"></use>\n      </svg>\n    </a>\n  </div>`}_generateIngredientsMarkUp(e){return e.ingredients.map((e=>` <li class="recipe__ingredient">\n      <svg class="recipe__icon">\n        <use href="${n(g)}#icon-check"></use>\n      </svg>\n      <div class="recipe__quantity">${e.quantity}</div>\n      <div class="recipe__description">\n        <span class="recipe__unit">${e.unit}</span>\n       ${e.description}\n      </div>\n    </li>`)).join("")}addHandlerShowRecipe(e){["hashchange","load"].forEach((n=>window.addEventListener(n,(function(n){console.log(n),e()}))))}addHandlerServings(e){this._parentEl.addEventListener("click",(function(n){const s=n.target.closest(".btn--tiny");if(s){if(s.classList.contains("btn--increase-servings")){const e=o.recipe[0].servings+1;if(e<1)return;u(e)}if(s.classList.contains("btn--decrease-servings")){const e=o.recipe[0].servings-1;if(e<1)return;u(e)}e()}}))}};var h=new class extends _{_parentEl=document.querySelector(".pagination");_generateMarkUp(e=o.page){const s=Math.ceil(o.results.length/10);return console.log(s),1===s?"":1===e?`<button class="btn--inline pagination__btn--next">\n        <span>Page ${e+1}</span>\n        <svg class="search__icon">\n          <use href="${n(g)}#icon-arrow-right"></use>\n        </svg>\n      </button>`:e===s?` <button class="btn--inline pagination__btn--prev">\n    <svg class="search__icon">\n      <use href="${n(g)}#icon-arrow-left"></use>\n    </svg>\n    <span>Page ${e-1}</span>\n  </button>\n `:e>1&&e<s?` <button class="btn--inline pagination__btn--prev">\n        <svg class="search__icon">\n          <use href="${n(g)}#icon-arrow-left"></use>\n        </svg>\n        <span>Page ${e-1}</span>\n      </button>\n      <button class="btn--inline pagination__btn--next">\n        <span>Page ${e+1}</span>\n        <svg class="search__icon">\n          <use href="${n(g)}#icon-arrow-right"></use>\n        </svg>\n      </button> `:void 0}addHandlerPagination(e,n){this._parentEl.addEventListener("click",(function(e){const s=e.target.closest(".btn--inline");s.classList.contains("pagination__btn--prev")&&(o.page=o.page-1),s.classList.contains("pagination__btn--next")&&(o.page=o.page+1),d(o.page),n()}))}};var b=new class extends _{_parentEl=document.querySelector(".bookmarks__list");addHandlerBookmarks(e){document.querySelector(".recipe").addEventListener("click",(function(n){n.target.closest(".btn--round")&&(o.recipe[0].bookmarked?function(){const e=o.bookmarks.findIndex((e=>e[0].id===o.recipe[0].id));o.recipe[0].bookmarked=!1,console.log(o.recipe[0].bookmarked),o.bookmarks.splice(e,1),console.log(o.bookmarks)}():(o.recipe[0].bookmarked=!0,o.bookmarks.push(o.recipe),console.log(o.recipe[0].bookmarked),console.log(o.bookmarks)),localStorage.setItem("bookmarks2",JSON.stringify(o.bookmarks)),e())}))}_generateMarkUp(e){const s=window.location.hash.slice(1),r=e[0];return console.log(r),` <li class="preview">\n    <a class="preview__link ${s===r.id?"preview__link--active":""}" href=#${r.id}>\n      <figure class="preview__fig">\n        <img src=${r.image_url} alt=${r.title} />\n      </figure>\n      <div class="preview__data">\n        <h4 class="preview__title">${r.title}</h4>\n        <p class="preview__publisher">${r.publisher}</p>\n        <div class="preview__user-generated">\n          <svg>\n          <use href="${n(g)}#icon-user"></use>\n          </svg>\n        </div>\n      </div>\n    </a>\n  </li>`}};document.querySelector(".recipe");async function k(e){try{v.renderSpinner(),await l(e),v.render(o.pageResults),h.render(o.page)}catch(e){v.renderError(),console.log(e)}}async function m(){try{f.renderSpinner();const e=window.location.hash.slice(1);await p(e),f.render(o.recipe),f.addHandlerServings($),b.render(o.bookmarks),o.pageResults.length>0&&v.render(o.pageResults)}catch(e){f.renderError(),console.log(e)}}console.log("hello");const w=function(){v.render(o.pageResults),h.render(o.page)},y=function(){f.render(o.recipe),b.render(o.bookmarks)};f.addHandlerShowRecipe(m),c(k),h.addHandlerPagination(o.page,w),b.addHandlerBookmarks(y);const $=function(){console.log("ok"),f.render(o.recipe)};
//# sourceMappingURL=index.4a3bb7eb.js.map
