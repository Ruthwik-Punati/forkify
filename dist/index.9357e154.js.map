{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-552fcf0be4b79281.js","src/js/helper.js","src/js/model.js","node_modules/@parcel/runtime-js/lib/runtime-644f02e9c3f5eee3.js","src/js/views/view.js","src/js/views/results.js","src/js/views/showRecipe.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9fpV\\\":\\\"index.9357e154.js\\\",\\\"hfd23\\\":\\\"icons.c14567a0.svg\\\"}\"));","export const getJson = async function (url) {\r\n  const fetchRes = await fetch(url);\r\n\r\n  const data = await fetchRes.json();\r\n\r\n  return data;\r\n};\r\n","import { getJson } from './helper.js';\r\n\r\nexport const state = {\r\n  results: [],\r\n  recipe: [],\r\n  query: '',\r\n};\r\n\r\nexport const addHandlerSearch = function (handler) {\r\n  document.querySelector('.search').addEventListener('submit', function (e) {\r\n    e.preventDefault();\r\n    const query = getQuery();\r\n    handler(query);\r\n  });\r\n};\r\n\r\nexport function getQuery() {\r\n  const query = document.querySelector('.search__field').value;\r\n  document.querySelector('.search__field').value = '';\r\n  return query;\r\n}\r\n\r\nexport const getSearchResults = async function (query) {\r\n  const data = await getJson(\r\n    `https://forkify-api.herokuapp.com/api/v2/recipes?search=${query}`\r\n  );\r\n  const { recipes } = data.data;\r\n\r\n  state.results = recipes.map(recipe => {\r\n    const { publisher, image_url, title, id } = recipe;\r\n\r\n    return { publisher, image_url, title, id };\r\n  });\r\n};\r\n\r\nexport const showRecipe = async function (idNo) {\r\n  const data = await getJson(\r\n    `https://forkify-api.herokuapp.com/api/v2/recipes/${idNo}`\r\n  );\r\n  console.log(data);\r\n\r\n  const { recipe } = data.data;\r\n  console.log(recipe);\r\n  state.recipe = [recipe];\r\n};\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hfd23\")).toString();","import icons from '../../img/icons.svg';\r\n\r\nexport default class View {\r\n  render(data) {\r\n    if (!data || data.length === 0) throw Error();\r\n    const markUp = data.map(data => this._generateMarkUp(data)).join('');\r\n    this.clear();\r\n    this._parentEl.insertAdjacentHTML('afterbegin', markUp);\r\n  }\r\n  clear() {\r\n    this._parentEl.innerHTML = '';\r\n  }\r\n\r\n  renderError() {\r\n    const markUp = `<div class=\"error\">\r\n    <div>\r\n      <svg>\r\n        <use href=\"${icons}#icon-alert-triangle\"></use>\r\n      </svg>\r\n    </div>\r\n    <p>${this._message}</p>\r\n  </div>`;\r\n    this.clear();\r\n    this._parentEl.insertAdjacentHTML('afterbegin', markUp);\r\n  }\r\n}\r\n","import View from './view.js';\r\nimport icons from '../../img/icons.svg';\r\n\r\nclass ResultsView extends View {\r\n  constructor() {\r\n    super();\r\n  }\r\n  _parentEl = document.querySelector('.results');\r\n  _message = 'no recipes for this query!';\r\n  _generateMarkUp(result) {\r\n    console.log(result.id);\r\n    return ` <li class=\"preview\">\r\n    <a class=\"preview__link preview__link--active\" href=#${result.id}>\r\n      <figure class=\"preview__fig\">\r\n        <img src=${result.image_url} alt=${result.title} />\r\n      </figure>\r\n      <div class=\"preview__data\">\r\n        <h4 class=\"preview__title\">${result.title}</h4>\r\n        <p class=\"preview__publisher\">${result.publisher}</p>\r\n        <div class=\"preview__user-generated\">\r\n          <svg>\r\n          <use href=\"${icons}#icon-user\"></use>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </a>\r\n  </li>`;\r\n  }\r\n\r\n  preventingReload() {\r\n    document\r\n      .querySelector('.preview__link')\r\n      .addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n      });\r\n  }\r\n}\r\n\r\nexport default new ResultsView();\r\n","import View from './view.js';\r\nimport icons from '../../img/icons.svg';\r\n\r\nclass showRecipe extends View {\r\n  _parentEl = document.querySelector('.recipe');\r\n  _message = 'Something went wrong! Please try again!';\r\n  _generateMarkUp(recipe) {\r\n    return ` <figure class=\"recipe__fig\">\r\n    <img src=${recipe.image_url} alt=${recipe.title} class=\"recipe__img\" />\r\n    <h1 class=\"recipe__title\">\r\n      <span>${recipe.title}</span>\r\n    </h1>\r\n  </figure>\r\n\r\n  <div class=\"recipe__details\">\r\n    <div class=\"recipe__info\">\r\n      <svg class=\"recipe__info-icon\">\r\n        <use href=\"${icons}#icon-clock\"></use>\r\n      </svg>\r\n      <span class=\"recipe__info-data recipe__info-data--minutes\">${recipe.cooking_time}</span>\r\n      <span class=\"recipe__info-text\">minutes</span>\r\n    </div>\r\n    <div class=\"recipe__info\">\r\n      <svg class=\"recipe__info-icon\">\r\n        <use href=${icons}></use>\r\n      </svg>\r\n      <span class=\"recipe__info-data recipe__info-data--people\">${recipe.servings}</span>\r\n      <span class=\"recipe__info-text\">servings</span>\r\n\r\n      <div class=\"recipe__info-buttons\">\r\n        <button class=\"btn--tiny btn--increase-servings\">\r\n          <svg>\r\n            <use href=\"${icons}#icon-minus-circle\"></use>\r\n          </svg>\r\n        </button>\r\n        <button class=\"btn--tiny btn--increase-servings\">\r\n          <svg>\r\n            <use href=\"${icons}#icon-plus-circle\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"recipe__user-generated\">\r\n      <svg>\r\n        <use href=\"${icons}#icon-user\"></use>\r\n      </svg>\r\n    </div>\r\n    <button class=\"btn--round\">\r\n      <svg class=\"\">\r\n        <use href=\"${icons}#icon-bookmark-fill\"></use>\r\n      </svg>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"recipe__ingredients\">\r\n    <h2 class=\"heading--2\">Recipe ingredients</h2>\r\n    <ul class=\"recipe__ingredient-list\">\r\n      <li class=\"recipe__ingredient\">\r\n        <svg class=\"recipe__icon\">\r\n          <use href=\"${icons}#icon-check\"></use>\r\n        </svg>\r\n        <div class=\"recipe__quantity\">1000</div>\r\n        <div class=\"recipe__description\">\r\n          <span class=\"recipe__unit\">g</span>\r\n          pasta\r\n        </div>\r\n      </li>\r\n\r\n      <li class=\"recipe__ingredient\">\r\n        <svg class=\"recipe__icon\">\r\n          <use href=\"${icons}#icon-check\"></use>\r\n        </svg>\r\n        <div class=\"recipe__quantity\">0.5</div>\r\n        <div class=\"recipe__description\">\r\n          <span class=\"recipe__unit\">cup</span>\r\n          ricotta cheese\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n  <div class=\"recipe__directions\">\r\n    <h2 class=\"heading--2\">How to cook it</h2>\r\n    <p class=\"recipe__directions-text\">\r\n      This recipe was carefully designed and tested by\r\n      <span class=\"recipe__publisher\">The Pioneer Woman</span>. Please check out\r\n      directions at their website.\r\n    </p>\r\n    <a\r\n      class=\"btn--small recipe__btn\"\r\n      href=\"http://thepioneerwoman.com/cooking/pasta-with-tomato-cream-sauce/\"\r\n      target=\"_blank\"\r\n    >\r\n      <span>Directions</span>\r\n      <svg class=\"search__icon\">\r\n        <use href=\"${icons}#icon-arrow-right\"></use>\r\n      </svg>\r\n    </a>\r\n  </div>`;\r\n  }\r\n}\r\n\r\nexport default new showRecipe();\r\n","import * as model from './model.js';\nimport resultsView from './views/results.js';\nimport showRecipe from './views/showRecipe.js';\nconst recipeContainer = document.querySelector('.recipe');\n\nconst timeout = function (s) {\n  return new Promise(function (_, reject) {\n    setTimeout(function () {\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\n    }, s * 1000);\n  });\n};\n\n// https://forkify-api.herokuapp.com/v2\n\n///////////////////////////////////////\n\nconsole.log('hello');\n\nasync function controllResults(query) {\n  try {\n    await model.getSearchResults(query);\n    resultsView.render(model.state.results);\n    // resultsView.preventingReload();\n    console.log(model.state.results);\n  } catch (err) {\n    resultsView.renderError();\n    console.log(err);\n  }\n}\n\nasync function controllShowRecipe() {\n  try {\n    console.log(window.location.pathname.slice(1));\n    const id = window.location.pathname.slice(1);\n    await model.showRecipe(id);\n    console.log(id);\n    console.log(model.state.recipe);\n    showRecipe.render(model.state.recipe);\n  } catch (err) {\n    showRecipe.renderError();\n    console.log(err);\n  }\n}\n\nconst init = function () {\n  model.addHandlerSearch(controllResults);\n\n  controllShowRecipe();\n};\ninit();\n\nwindow.addEventListener('hashchange', function (e) {\n  // e.preventDefault();\n\n  controllShowRecipe();\n});\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$d3824bf2ef2465db$export$a75c676177490cac","async","url","fetchRes","fetch","json","$0f1d4402dffacf5b$export$ca000e230c0caa3e","results","recipe","query","$0f1d4402dffacf5b$export$16843bd9db699016","handler","document","querySelector","addEventListener","e","preventDefault","value","$0f1d4402dffacf5b$export$71eec30d9db46a56","$0f1d4402dffacf5b$export$cfcc0908d6dfb8a6","data","recipes","map","publisher","image_url","title","$0f1d4402dffacf5b$export$33183e408bb164dd","idNo","console","log","$cb59c201e168fdfe$exports","URL","resolve","toString","$b2d7157267813d3a$export$2e2bcd8739ae039","render","markUp","this","_generateMarkUp","join","clear","_parentEl","insertAdjacentHTML","innerHTML","renderError","$parcel$interopDefault","_message","$49dc1478e812358d$export$2e2bcd8739ae039","constructor","super","result","preventingReload","$6cc0b7226d443725$export$2e2bcd8739ae039","cooking_time","servings","$f50bd1f2915ed0f2$var$controllResults","err","$f50bd1f2915ed0f2$var$controllShowRecipe","window","location","pathname","slice"],"version":3,"file":"index.9357e154.js.map"}